<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card Calculator</title>
    <style>
        
        body{padding: 0; margin: 0;}
        div{text-align: center; margin-left: auto; margin-right: auto; width: 40em;}
        #full_div{width: auto; height: auto; border: 1px;}
        #full_div1{width: auto; height: auto; border: 5px; border-color: black;}

    
    </style>

    <!--Stop phones zooming into the entry field-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

</head>
<div id="full_div">
    <body class="body" style="color:black">
    <h1>Card Calculator</h1>
    <hr>
    
            Enter a value into the field below and press which site you are using for pricing. The number porduced will minus site fee's (and postage in eBay's case)
</body>
    <script>
        
        function ebaycalc(){

            //ebay logic deduction (ebay take 12%, GBP and try to include p&p)
            let cardval = document.getElementById("cardval").value;
            cardval = cardval.replace(/£/, '');
            console.log(cardval)
            cardval = cardval *0.88
            let postage = 0
            if(cardval>=30){postage=2.95}
            else if(cardval<30){postage=0.95}
            if (postage >= 2.95){postage= 2.95}
            postage = postage.toFixed(2)
            console.log(postage)
            let final= cardval - postage
            final = final.toFixed(2)
            if (final < 1){final = "Cannot fetch price"}

            // adding to a result table 
            let p1 = document.createElement("p");
            let s1 = document.createTextNode(`£${final} From eBay`);
            p1.appendChild(s1)
            document.getElementById("full_div1").appendChild(p1);

        }
        function cardMcalc(){
            //card Marc logic deduct (cardm take 3% of sales, in euros and customer pays postage)
            let cardval = document.getElementById("cardval").value;
            cardval = cardval.replace(/£/, '');
            console.log(cardval)
            cardval = cardval*0.97
            cardval = cardval.toFixed(2)
            let euro_val = 1.13
            final = cardval/euro_val
            final = final.toFixed(2)
            if (final < 1){final = "Cannot fetch price"}

            // adding to a result table 
            let p1 = document.createElement("p");
            let s1 = document.createTextNode(`£${final} From CardMarket`);
            p1.appendChild(s1)
            document.getElementById("full_div1").appendChild(p1);
        }
        function on_click(){
            //removing all entries from DOM
            while(document.getElementById("full_div1").firstChild)
            {
                document.getElementById("full_div1").removeChild(document.getElementById("full_div1").firstChild);
            }}


    </script>
    <body1>
        <form name ="Card info">
            <br><br>
            <label for="CardValue" style="margin:5px">Enter Card Value:</label>
            <input id="cardval" type="float" name="inputted_card_value" style="margin: 5px;">
            <br>

            <p>Click a button to Calculate Card Value</p>
            <input type="button" value="eBay" style="margin:10px;" onclick="ebaycalc();">
            <input type="button" value="CardMarket" style="margin:10px" onclick="cardMcalc();">
            <br>
            <label for="checkbox" style="margin:10px">Apply a discount?</label>
            <input type="checkbox" value="discount" name="discount"> 
            <input type="button" value="Clear All Entries" onclick="on_click()">
        </form>
        <br><br>
    </body1>

    <div id="full_div1">
        <thead>The Cards True Value is. . .</thead>
    </div>

</body>
</div>

</html>